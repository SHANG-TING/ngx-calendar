!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-rx-modal"),require("rxjs"),require("@angular/animations"),require("@angular/common"),require("@angular/platform-browser"),require("hammerjs")):"function"==typeof define&&define.amd?define("ngx-hm-calendar",["exports","@angular/core","ngx-rx-modal","rxjs","@angular/animations","@angular/common","@angular/platform-browser","hammerjs"],t):t(e["ngx-hm-calendar"]={},e.ng.core,e["ngx-rx-modal"],e.rxjs,e.ng.animations,e.ng.common,e.ng.platformBrowser,null)}(this,function(e,n,t,a,r,o,i,s){"use strict";var l={month:"month",week:"week",day:"day"},c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var d=function(){return S=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},S.apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(a=o.next()).done;)i.push(a.value)}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return i}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function h(a,r,e,t){void 0===t&&(t=[]);var n,o,i,s,l=new Date,c=new Date(a,r,1).getDay(),d=new Array(31,28+((n=a)%100==0?n%400==0?1:0:n%4==0?1:0),31,30,31,30,31,31,30,31,30,31),p=Math.ceil((d[r]+c)/7),h=e.concat.apply(e,m(t.map(w(a,r)))),u=[];for(o=0;o<p;o++){var y={days:[],style:{}},f=function(){var t;if((s=7*o+i-c+1)<=0){var e=new Date(a,r,1);e.setDate(e.getDate()+s-1),t={date:e,other:!0}}else if(s>d[r]){var n=new Date(a,r,1);n.setMonth(n.getMonth()+1),n.setDate(n.getDate()+(s-d[r])-1),t={date:n,other:!0}}else t={date:new Date(a,r,s)};t.events=h.filter(function(e){return g(e,t.date)}),t.name=t.date.getDay(),t.number=t.date.getDate(),t.isToday=t.date.getFullYear()===l.getFullYear()&&t.date.getMonth()===l.getMonth()&&t.date.getDate()===l.getDate(),y.days.push(t)};for(i=0;i<7;i++)f();u.push(y)}return u}function g(e,t){if(e.start&&e.end){var n=new Date(e.start.getFullYear(),e.start.getMonth(),e.start.getDate()),a=new Date(e.end.getFullYear(),e.end.getMonth(),e.end.getDate());return a.setDate(a.getDate()+1),n.getTime()<=t.getTime()&&a.getTime()>t.getTime()}return!!e.start&&(e.start.getFullYear()===t.getFullYear()&&e.start.getMonth()===t.getMonth()&&e.start.getDate()===t.getDate())}function w(c,d){return function(n){var e=n.start,a=n.end.getTime()-n.start.getTime(),t=e.getDay(),r=new Date(c,d,1),o=r.getDay(),i=new Date(c,d+1,1),s=[],l=new Date(r.setDate(r.getDate()+(t-o)));for(l.setHours(e.getHours()),l.setMinutes(e.getMinutes()),l.setSeconds(e.getSeconds()),l.setMilliseconds(e.getMilliseconds()),s.push(new Date(l.getTime()));l<i;)l=new Date(l.setDate(l.getDate()+7)),s.push(new Date(l.getTime()));return s.map(function(e){var t=Object.assign({},n);return t.start=new Date(e.getTime()),t.end=new Date(e.setTime(e.getTime()+a)),t})}}var u=function(){function e(){this.className="black",this.weekNames=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],this.yearName="年",this.monthName="月",this.weeklyEvents=[],this.events=[],this.nstr=new Date,this.open=new n.EventEmitter,this.calendarData=h(this.ynow,this.mnow,this.events,this.weeklyEvents),this.eachPresent=100/14}return Object.defineProperty(e.prototype,"ynow",{get:function(){return this.nstr.getFullYear()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mnow",{get:function(){return this.nstr.getMonth()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dnow",{get:function(){return this.nstr.getDate()},enumerable:!0,configurable:!0}),e.prototype.prev=function(){this.nstr.setMonth(this.nstr.getMonth()-1),this.calendarData=h(this.ynow,this.mnow,this.events,this.weeklyEvents)},e.prototype.next=function(){this.nstr.setMonth(this.nstr.getMonth()+1),this.calendarData=h(this.ynow,this.mnow,this.events,this.weeklyEvents)},e.prototype.showEventList=function(e,t){if(t.events.length)if(e.selectedDay&&e.selectedDay===t)e.selectedDay=undefined;else{this.calendarData.forEach(function(e){e.selectedDay=undefined});var n=(2*(e.selectedDay=t).name+1)*this.eachPresent;e.style={flex:"1 1 "+n+"%","max-width":n+"%","min-width":n+"%"}}},e.prototype.openEvent=function(e){this.open.emit(e)},e.prototype.trackByFn=function(e,t){return e},e.prototype.ngOnChanges=function(e){(e.events||e.nstr)&&(this.calendarData=h(this.ynow,this.mnow,this.events,this.weeklyEvents))},e.decorators=[{type:n.Component,args:[{selector:"ngx-hm-calendar-month-view",template:'<div class="month new"\n     [ngClass]="className">\n  <div class="week"\n       *ngFor="let week of calendarData; trackBy: trackByFn; let week_index = index;">\n    <div class="day"\n         *ngFor="let day of week.days; trackBy: trackByFn; let day_index = index;"\n         [ngClass]="{ other: day.other, today: day.isToday }"\n         (click)="showEventList(week, day)">\n      <div class="day-name">{{ weekNames[day.name] }}</div>\n      <div class="day-number">{{ day.number }}</div>\n      <div class="day-events">\n        <ng-container *ngFor="let event of day.events;">\n          <span [style.background]="event.color"></span>\n        </ng-container>\n      </div>\n    </div>\n    <div class="details"\n         [ngClass]="{ \'in\': week.selectedDay, \'out\': !week.selectedDay }">\n      <div class="arrow-container"\n           *ngIf="week.selectedDay">\n        <div class="fill"\n             [ngStyle]="week.style"></div>\n        <div class="arrow"></div>\n      </div>\n      <div class="events">\n        <ng-container *ngIf="week.selectedDay">\n          <div class="event"\n               *ngFor="let event of week.selectedDay.events;"\n               (click)="openEvent(event)">\n            <div class="event-category"\n                 [style.background]="event.color"></div>\n            <span>{{ event.title }}</span>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[":host{display:block;max-height:85vh}.month{opacity:0}.month.new{-webkit-animation:1s ease-out fadeIn;animation:1s ease-out fadeIn;opacity:1;overflow-y:scroll}.month.black .day{color:#fff}.month.black .day.other{color:#717171}.month.black .day.today{background:#467298;color:#53b7ff}.month.black .day-name{color:rgba(255,255,255,.5)}.month.black .details{background:#a4a4a4;color:#fff}.month.white .day{color:#000}.month.white .day.other,.month.white .day.other .day-name{color:#dadada}.month.white .day.today{background:#d7ecff;color:#53b7ff}.month.white .day-name{color:#db4437}.month.white .arrow{border-color:transparent transparent #dcffc7}.month.white .details{background:#dcffc7}.month .week{display:flex;flex-wrap:wrap}.month .week .day{z-index:1;display:inline-block;width:calc(100% / 7);padding:10px;text-align:center;cursor:pointer;box-sizing:border-box}.month .week .day .day-events{list-style:none;margin-top:3px;text-align:center;min-height:12px;line-height:6px;overflow:hidden}.month .week .day .day-events span{display:inline-block;width:5px;height:5px;margin:0 1px}.month .week .day .day-name{font-size:9px;text-transform:uppercase;margin-bottom:5px;letter-spacing:.7px}.month .week .day .day-number{font-size:24px}.month .week .details{display:none;position:relative;max-height:5000px;width:100%;margin-top:5px;border-radius:4px;flex:1 1 100%;min-width:100%;max-width:100%}.month .week .details.in{display:block;-webkit-animation:.5s cubic-bezier(1,0,1,0) moveFromTopFade;animation:.5s cubic-bezier(1,0,1,0) moveFromTopFade}.month .week .details.in .event{-webkit-animation:.3s .3s both fadeIn;animation:.3s .3s both fadeIn}.month .week .details.out{display:block;z-index:-1;max-height:0;transition:all .5s cubic-bezier(0,1,0,1)}.month .week .details.out .event{-webkit-animation:.3s both fadeIn;animation:.3s both fadeIn}.month .week .details .arrow-container{width:100%;display:flex}.month .week .details .arrow-container .fill{transition:all .3s ease}.month .week .details .arrow-container .arrow{-webkit-transform:translateX(-2.5px) translateY(-5px);transform:translateX(-2.5px) translateY(-5px);width:0;height:0;border-style:solid;border-width:0 5px 5px;border-color:transparent transparent #a4a4a4}.month .week .details .events{min-height:120px;padding:7px 0;overflow-y:auto;overflow-x:hidden}.month .week .details .events .event{font-size:16px;line-height:22px;letter-spacing:.5px;padding:2px 16px;vertical-align:top;display:flex}.month .week .details .events .event.empty{color:#eee}.month .week .details .events .event .event-category{height:10px;width:10px;display:inline-block;margin:6px 5px 0;vertical-align:top}.month .week .details .events .event span{display:inline-block;padding:0 0 0 7px}.month .week .details .events .event span:hover{color:#ff0;font-size:120%}.month .week .details .events .event span:active{color:red}@media screen and (max-width:320px){.day{padding:5px}}@-webkit-keyframes moveFromTopFade{0%{max-height:0}100%{max-height:5000px}}@keyframes moveFromTopFade{0%{max-height:0}100%{max-height:5000px}}@-webkit-keyframes fadeIn{0%{opacity:0}}@keyframes fadeIn{0%{opacity:0}}@-webkit-keyframes fadeOut{100%{opacity:0}}@keyframes fadeOut{100%{opacity:0}}",".blue{background:#9ccaeb}.orange{background:#f7a700}.green{background:#99c66d}.yellow{background:#f9e900}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={className:[{type:n.Input}],weekNames:[{type:n.Input}],yearName:[{type:n.Input}],monthName:[{type:n.Input}],weeklyEvents:[{type:n.Input}],events:[{type:n.Input}],nstr:[{type:n.Input}],open:[{type:n.Output}]},e}(),y=function(){function e(){this.className="black",this.dayName="號",this.weekNames=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],this.weeklyEvents=[],this.events=[],this.nstr=new Date,this.open=new n.EventEmitter,this.weekDays=[],this.weekEvents=[]}return e.prototype.ngOnInit=function(){this.initValue()},e.prototype.initValue=function(){this.setWeekDays(),this.setWeekEvents()},e.prototype.setWeekDays=function(){var e=new Date,t=this.nstr.getDay(),n=new Date(this.nstr.getTime());n.setDate(n.getDate()+(0-t)),this.weekDays=[];for(var a=0;a<7;a++){var r=new Date(n.getTime());r.setDate(r.getDate()+a),this.weekDays.push({date:r,year:r.getFullYear(),month:r.getMonth(),day:r.getDate(),isToday:r.toDateString()===e.toDateString()})}},e.prototype.setWeekEvents=function(){var e,t=this.weekDays[0],n=new Date(t.year,t.month,t.day),a=n.getDay(),r=this.weekDays[6],o=new Date(r.year,r.month,r.day),i=o.getDay();o.setDate(o.getDate()+1),this.weekEvents=(e=this.events).concat.apply(e,m(this.weeklyEvents.map(w(t.year,t.month)))).filter(function(e){return e.start>=n&&e.start<o||n>=e.start&&n<=e.end||e.start<=n&&o<e.end}).sort(function(e,t){return e.start.getTime()-t.start.getTime()}).map(function(e){var t={style:{width:7,left:e.start.getDay()-a,color:e.color},startsBeforeWeek:!0,endsAfterWeek:!0,title:e.title,url:e.url,data:e};return e.start>=n&&e.end<o?(t.style.width=e.end.getDay()-e.start.getDay()+1,t.style.left=e.start.getDay()-a):e.start<n&&n<=e.end&&e.end<o?(t.style.width=e.end.getDay()-a+1,t.style.left=0,t.startsBeforeWeek=!1):e.start>=n&&e.start<o&&e.end>=o?(t.style.width=i-e.start.getDay()+1,t.style.left=e.start.getDay()-a,t.endsAfterWeek=!1):e.start<=n&&o<e.end&&(t.style.width=7,t.style.left=0,t.startsBeforeWeek=!1,t.endsAfterWeek=!1),d({},t,{style:{width:t.style.width/7*100+"%",left:t.style.left/7*100+"%",color:e.color}})})},e.prototype.prev=function(){this.nstr.setDate(this.nstr.getDate()-7),this.initValue()},e.prototype.next=function(){this.nstr.setDate(this.nstr.getDate()+7),this.initValue()},e.prototype.openEvent=function(e){this.open.emit(e)},e.prototype.ngOnChanges=function(e){(e.nstr||e.events)&&this.initValue()},e.decorators=[{type:n.Component,args:[{selector:"ngx-hm-calendar-week-view",template:'<div class="cal-week-view"\n     [ngClass]="className">\n\n  <div class="cal-day-headers">\n\n    <div class="cal-header"\n         *ngFor="let weekDay of weekDays; let i = index; let isFirst = first; let isLast = last"\n         [class.cal-weekend]="isFirst || isLast"\n         [class.cal-today]="weekDay.isToday">\n      <b>{{ weekNames[i] }}</b>\n      <br>\n      <span>{{ weekDay.day }}{{ dayName }}</span>\n    </div>\n  </div>\n\n  <div class="action-block">\n    <div class="cal-events-row "\n         *ngFor="let weekEvent of weekEvents; let i = index;">\n      <div class="cal-event-container cal-starts-within-week cal-ends-within-week "\n           [style.width]="weekEvent.style.width"\n           [style.left]="weekEvent.style.left"\n           [class.cal-starts-within-week]="weekEvent.startsBeforeWeek"\n           [class.cal-ends-within-week]="weekEvent.endsAfterWeek">\n        <div class="cal-event"\n             [style.background]="weekEvent.style.color">\n          \x3c!-- <span class="cal-event-actions ">\n            <a class="cal-event-action " href="javascript:;">\n              <i class="fa fa-fw fa-pencil"></i>\n            </a>\n            <a class="cal-event-action " href="javascript:;">\n              <i class="fa fa-fw fa-times"></i>\n            </a>\n          </span> --\x3e\n          <a class="cal-event-title "\n             href="javascript: void(0)"\n             (click)="openEvent(weekEvent.data)">{{ weekEvent.title }}</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[":host{min-height:50vh;max-height:85vh;display:block}.black .cal-day-headers{background:#4a4a4a}.black .cal-header{border-right:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1;color:#fff}.black .cal-header.cal-today{background-color:#467298}.white .cal-day-headers{background:#fff}.white .cal-header{border-right:1px solid #e1e1e1;border-bottom:1px solid #e1e1e1}.white .cal-header.cal-today{background-color:#d7ecff}.cal-week-view{height:calc(100% - 30px);overflow-y:auto}.cal-week-view .cal-day-headers{display:flex;position:absolute;width:100%;z-index:1}.cal-week-view .cal-day-headers .cal-header{flex:1;text-align:center;padding:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:50px}.cal-week-view .action-block{padding-top:62px}.cal-week-view .cal-events-row{position:relative;height:33px}.cal-week-view .cal-event-container{display:inline-block;position:absolute}.cal-week-view .cal-ends-within-week .cal-event{border-top-right-radius:5px;border-bottom-right-radius:5px}.cal-week-view .cal-starts-within-week .cal-event{border-top-left-radius:5px;border-bottom-left-radius:5px}.cal-week-view .cal-event{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 10px;font-size:12px;margin-left:2px;margin-right:2px;height:30px;line-height:30px;background-color:#d1e8ff;border:1px solid #1e90ff;color:#1e90ff}.cal-week-view .cal-event.orange{background-color:#ffc681;border-color:#ad2121}.cal-week-view .cal-event.blue{background-color:#c4e7ff;border-color:#0834e3}a{color:#007bff;text-decoration:none;background-color:transparent;-webkit-text-decoration-skip:objects}.cal-week-view .cal-event-title:link{color:currentColor}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={className:[{type:n.Input}],dayName:[{type:n.Input}],weekNames:[{type:n.Input}],weeklyEvents:[{type:n.Input}],events:[{type:n.Input}],nstr:[{type:n.Input}],open:[{type:n.Output}]},e}(),f=[{name:"12 AM"},{name:"01 AM"},{name:"02 AM"},{name:"03 AM"},{name:"04 AM"},{name:"05 AM"},{name:"06 AM"},{name:"07 AM"},{name:"08 AM"},{name:"09 AM"},{name:"10 AM"},{name:"11 AM"},{name:"12 AM"},{name:"01 PM"},{name:"02 PM"},{name:"03 PM"},{name:"04 PM"},{name:"05 PM"},{name:"06 PM"},{name:"07 PM"},{name:"08 PM"},{name:"09 PM"},{name:"10 PM"},{name:"11 PM"}],b=function(){function e(){this.className="black",this.weeklyEvents=[],this.events=[],this.nstr=new Date(2018,6,16),this.start="00:00",this.end="24:00",this.split=30,this.open=new n.EventEmitter,this.elmWidth=110,this.dayEvents=[],this.hourSchemas=f}return Object.defineProperty(e.prototype,"firstDate",{get:function(){var e=new Date(this.nstr.getFullYear(),this.nstr.getMonth(),this.nstr.getDate()),t=this.start.split(":");if(0<t.length){var n=Number(t[0]),a=Number(t[1]);n+1&&(e.setHours(n),a+1&&e.setMinutes(a))}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastDate",{get:function(){var e=new Date(this.nstr.getFullYear(),this.nstr.getMonth(),this.nstr.getDate()),t=this.end.split(":");if(0<t.length){var n=Number(t[0]),a=Number(t[1]);n&&(e.setHours(n),a&&e.setMinutes(a))}return Number(e)-Number(this.firstDate)<=0&&(e.setHours(24),e.setMinutes(0)),e},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.initView()},e.prototype.initView=function(){this.setHourSchemas(),this.setDayEvent(),this.bindDayEventWidth()},e.prototype.setHourSchemas=function(){var e=Number(this.lastDate)-Number(this.firstDate),t=Math.ceil(e/36e5),n=this.firstDate.getHours();this.hourSchemas=[];for(var a=n;a<n+t;a++)this.hourSchemas.push({name:("0"+a).substr(-2)+" "+(12<a?"PM":"AM")})},e.prototype.setDayEvent=function(){var e,a=this,r=this.firstDate,o=this.lastDate,i=function(e,t){return(e.getTime()-t.getTime())%864e5/(60*a.split*1e3)};this.dayEvents=(e=this.events).concat.apply(e,m(this.weeklyEvents.map(w(this.nstr.getFullYear(),this.nstr.getMonth())))).filter(function(e){return e.start>=r&&e.start<o||r>=e.start&&r<=e.end||r>=e.start&&o<e.end}).sort(function(e,t){return e.start.getTime()-t.start.getTime()}).map(function(e,t){var n={style:{top:0,height:0,left:t*a.elmWidth},startsBeforeWeek:!0,endsAfterWeek:!0,data:e};return e.start>=r?e.end<o?(n.style.top=30*i(e.start,r),n.style.height=30*i(e.end,e.start)):e.start<o&&e.end>=o&&(n.style.top=30*i(e.start,r),n.style.height=30*i(o,e.start),n.endsAfterWeek=!1):e.start<=r&&(o<e.end?(n.style.height=2*a.hourSchemas.length*30,n.startsBeforeWeek=!1,n.endsAfterWeek=!1):r<=e.end&&e.end<o&&(n.style.height=30*i(e.end,r),n.startsBeforeWeek=!1)),n}).filter(function(e){return 0!==e.style.height}).map(function(e,t){return e.style.left=t*a.elmWidth,d({},e,{style:{top:e.style.top+"px",height:e.style.height+"px",left:e.style.left+"px",background:""+e.data.color}})})},e.prototype.bindDayEventWidth=function(){var a=this;setTimeout(function(){var n=a.dayEvents.length?a.dayEvents.map(function(e,t){return 10*t}).reduce(function(e,t){return e+t}):0;document.body.offsetWidth-100<100*a.dayEvents.length+n&&a.bars.forEach(function(e,t){e.nativeElement.style.width=100*a.dayEvents.length+n+"px"})},0)},e.prototype.prev=function(){this.nstr.setDate(this.nstr.getDate()-1),this.initView()},e.prototype.next=function(){this.nstr.setDate(this.nstr.getDate()+1),this.initView()},e.prototype.openEvent=function(e){this.open.emit(e)},e.prototype.ngOnChanges=function(e){(e.nstr||e.start||e.end)&&this.initView()},e.decorators=[{type:n.Component,args:[{selector:"ngx-hm-calendar-day-view",template:'<div [ngClass]="className"\n     class="content">\n  <div class="title">\n    <div class="hour name"\n         *ngFor="let hourSchema of hourSchemas">\n      {{ hourSchema.name }}\n    </div>\n  </div>\n  <div class="strip">\n    <section *ngFor="let hourSchema of hourSchemas; let index = index;"\n             class="hour"\n             #bar>\n      <div class="line"></div>\n      <div class="line"></div>\n    </section>\n\n    \x3c!-- events --\x3e\n    <div *ngFor="let dayEvent of dayEvents"\n         class="bar"\n         [ngStyle]="dayEvent.style"\n         [class.cal-starts-within-day]="dayEvent.startsBeforeWeek"\n         [class.cal-ends-within-day]="dayEvent.endsAfterWeek">\n      <span (click)="openEvent(dayEvent.data)">\n        {{ dayEvent.data.title }}\n      </span>\n    </div>\n    \x3c!--<div style="background: green;\n    height: 90px;\n    width: 100px;\n    position: absolute;\n    top: 180px;\n    left: 100px;">\n    </div>\n    <div style="background: pink;\n    height: 120px;\n    width: 100px;\n    position: absolute;\n    top: 180px;left: 200px;">\n    </div>\n    <div style="background: paleturquoise;\n    height: 210px;\n    width: 100px;\n    position: absolute;\n    top: 180px;left: 300px;">\n    </div> --\x3e\n  </div>\n</div>\n',styles:[":host{display:block;overflow-y:scroll;max-height:85vh}.black .hour .line{border-bottom:thin dashed #888f90}.black .hour .line:hover{background:wheat}.black .hour.name{color:#fff}.black .hour:nth-child(odd){background:#6f6e6e}.white .hour .line{border-bottom:thin dashed #000}.white .hour .line:hover{background:wheat}.white .hour:nth-child(odd){background:#fbeeee}.content{display:flex;margin-bottom:30px}.content .title{width:100px;flex:0 0 100px}.content .strip{position:relative;width:100%}.content .hour{height:60px}.content .hour.name{line-height:60px;text-align:center}.content .hour .line{height:30px;display:flex}.content .hour .line .active{width:100px;height:100%;flex:0 0 100px;box-sizing:content-box;z-index:1}.bar{border:1px solid #1e90ff;width:100px;position:absolute;color:#fff;padding:5px}.bar.cal-starts-within-day{border-top-left-radius:5px;border-top-right-radius:5px}.bar.cal-ends-within-day{border-bottom-left-radius:5px;border-bottom-right-radius:5px}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={className:[{type:n.Input}],weeklyEvents:[{type:n.Input}],events:[{type:n.Input}],nstr:[{type:n.Input}],start:[{type:n.Input}],end:[{type:n.Input}],split:[{type:n.Input}],open:[{type:n.Output}],bars:[{type:n.ViewChildren,args:["bar"]}]},e}(),v="Year",k="Month",x="Day",D=function(){function e(e){this.data=e,this.popupData={},this.mode=v,this.minYear=2016,this.months=[0,1,2,3,4,5,6,7,8,9,10,11],this.complete=new a.Subject,this.popupData=e}return Object.defineProperty(e.prototype,"years",{get:function(){var n=this;return Array.from({length:24},function(e,t){return t+n.minYear})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.prevYearRange=function(){this.minYear=this.minYear-24},e.prototype.nextYearRange=function(){this.minYear=this.minYear+24},e.prototype.selectYear=function(e){this.selectedYear=e,this.mode=k},e.prototype.selectMonth=function(e){this.selectedMonth=e,this.popupData.containerViewMode===l.day?(this.mode=x,this.calendarData=h(this.selectedYear,this.selectedMonth,[])):this.complete.next(new Date(this.selectedYear,this.selectedMonth,1))},e.prototype.selectDay=function(e){this.complete.next(e)},e.prototype.backToYearSelector=function(){this.mode=v},e.prototype.backToMonthSelector=function(){this.mode=k},e.decorators=[{type:n.Component,args:[{selector:"ngx-hm-calendar-month-popup",template:'<div class="wrapper" [ngClass]="popupData.theme">\n  <header class="header">\n\n    <div class="title" [ngSwitch]="mode">\n      <span *ngSwitchCase="\'Year\'">{{ minYear }} ~ {{ minYear + 24 }}年</span>\n      <span *ngSwitchCase="\'Month\'">{{ selectedYear }}年</span>\n      <span *ngSwitchCase="\'Day\'">{{ selectedYear }}年 {{ selectedMonth  + 1 }}月</span>\n    </div>\n\n\n    <ng-container [ngSwitch]="mode">\n\n      <div class="button-block" *ngSwitchCase="\'Year\'">\n\n        <button class="header-button" (click)="prevYearRange()">\n          <div class="button left"></div>\n        </button>\n        <button class="header-button" (click)="nextYearRange()">\n          <div class="button right"></div>\n        </button>\n\n      </div>\n\n      <div class="button-block" *ngSwitchCase="\'Month\'">\n        <button class="header-button" (click)="backToYearSelector()">\n          ▲\n        </button>\n      </div>\n\n      <div class="button-block" *ngSwitchCase="\'Day\'">\n        <button class="header-button" (click)="backToMonthSelector()">\n          ▲\n        </button>\n      </div>\n\n    </ng-container>\n\n  </header>\n  <ng-container [ngSwitch]="mode">\n\n    <div *ngSwitchCase="\'Year\'" class="container" (swipeleft)="nextYearRange()" (swiperight)="prevYearRange()">\n      <div class="box year" *ngFor="let year of years; let i = index;" (click)="selectYear(year)">{{ year }}</div>\n    </div>\n\n    <div *ngSwitchCase="\'Month\'" class="container" (swipeup)="backToYearSelector()">\n      <div class="box" *ngFor="let month of months; let i = index;" (click)="selectMonth(month)">{{ month + 1 }}</div>\n    </div>\n\n    <div *ngSwitchCase="\'Day\'" class="container" (swipeup)="backToMonthSelector()">\n      <div *ngFor="let week of calendarData; let i = index;">\n        <ng-container *ngFor="let day of week.days; let day_index = index;" >\n          <div class="box day" [class.n-month]="day.other" (click)="selectDay(day.date)">{{ day.number }}</div>\n        </ng-container>\n      </div>\n    </div>\n\n  </ng-container>\n\n\n</div>\n',styles:[".wrapper.black{background-color:#5e5b5b}.wrapper.black .header{background-color:#007bff}.wrapper.black .title{color:#fff}.wrapper.black .left{border-color:transparent #a09fa0 transparent transparent}.wrapper.black .left:hover{border-color:transparent #fff transparent transparent}.wrapper.black .right{border-color:transparent transparent transparent #a09fa0}.wrapper.black .right:hover{border-color:transparent transparent transparent #fff}.wrapper.black .box{background-color:#4f4b4b;color:#fff}.wrapper.white{background-color:#fff}.wrapper.white .header{background-color:#39fbd6}.wrapper.white .title{color:#000}.wrapper.white .left{border-color:transparent #a09fa0 transparent transparent}.wrapper.white .left:hover{border-color:transparent #fff transparent transparent}.wrapper.white .right{border-color:transparent transparent transparent #a09fa0}.wrapper.white .right:hover{border-color:transparent transparent transparent #fff}.wrapper.white .box{background-color:#f6ffcf;color:#000}.wrapper{width:300px;box-sizing:border-box}.wrapper .header{display:flex;justify-content:space-between;padding:10px}.wrapper .header .title{font-size:20px;margin:10px}.wrapper .header .button-block{display:flex;align-items:center}.wrapper .header .button-block .header-button{padding:1em;background:0 0;border:0;color:#a09fa0;cursor:pointer}.wrapper .header .button-block .header-button .button{border-style:solid;cursor:pointer;transition:all .5s linear}.wrapper .header .button-block .header-button .button.left{border-width:7.5px 10px 7.5px 0}.wrapper .header .button-block .header-button .button.right{border-width:7.5px 0 7.5px 10px}header a.next,header a.prev{float:right}.container:after{content:\"\";clear:both;display:table}.container{padding:10px 0 10px 10px}.wrapper .box{float:left;width:60px;height:60px;margin:0 10px 10px 0;text-align:center;transition:all 1s ease;cursor:pointer}.wrapper .box.day{float:none;display:inline-block;width:30px;height:auto;padding:5px;box-sizing:border-box}.wrapper .box.day.n-month{background-color:#837d7d}.wrapper .box::before{content:'';width:0;height:100%;display:inline-block;position:relative;vertical-align:middle;background:red}.wrapper .box:active{background-color:#ff0;color:#000}.wrapper .box.year{width:60px;height:30px}.wrapper.list-mode .container{padding-right:10px}.wrapper.list-mode .box{width:100%}"]}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[t.NGX_RX_MODAL_TOKEN]}]}]},e}(),M="150ms linear",E=function(){function e(e,t){this._model=e,this._factory=t,this.weekNames=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],this.yearName="年",this.monthName="月",this.dayName="日",this.eventCategorys=[],this.weeklyEvents=[],this.events=[],this.nstr=new Date,this.open=new n.EventEmitter,this.className="black",this.size={width:"100vw",height:"100vh"},this.viewMode=l.month,this.legendOpen="flyOut",this.monthPopupComponent=this._factory.resolveComponentFactory(D)}return Object.defineProperty(e.prototype,"ynow",{get:function(){return this.nstr.getFullYear()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mnow",{get:function(){return this.nstr.getMonth()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dnow",{get:function(){return this.nstr.getDate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monDetail",{get:function(){var e=this.ynow+" "+this.yearName+" "+(this.mnow+1)+" "+this.monthName;return this.viewMode===l.day&&(e=e+" "+this.dnow+" "+this.dayName),e},enumerable:!0,configurable:!0}),e.prototype.prev=function(){switch(this.viewMode){case l.month:this.monthComponent.prev();break;case l.week:this.weekComponent.prev();break;case l.day:this.dayComponent.prev()}},e.prototype.next=function(){switch(this.viewMode){case l.month:this.monthComponent.next();break;case l.week:this.weekComponent.next();break;case l.day:this.dayComponent.next()}},e.prototype.openEvent=function(e){this.open.emit(e)},e.prototype.openSelector=function(e){var t=this;this._model.open(this.monthPopupComponent,{disableCloseButton:!0,panelStyle:{top:e.offsetY+"px"},data:{theme:this.className,containerViewMode:this.viewMode}}).subscribe(function(e){e&&(t.nstr=e)})},e.prototype.chaneMode=function(e){this.viewMode=e},e.prototype.legendToggle=function(){this.legendOpen="flyIn"===this.legendOpen?"flyOut":"flyIn"},e.decorators=[{type:n.Component,args:[{selector:"ngx-hm-calendar",template:'<div class="content"\n     [ngClass]="className"\n     [ngStyle]="size">\n  <div class="header">\n    <span class="header-button"\n          (click)="prev()">\n      <div class="button left"></div>\n    </span>\n    <h1 class="title"\n        (click)="openSelector($event)">\n      {{ monDetail }}\n    </h1>\n    <span class="header-button"\n          (click)="next()">\n      <div class="button right"></div>\n    </span>\n  </div>\n  <div class="view-block"\n       [ngSwitch]="viewMode">\n\n    <ngx-hm-calendar-month-view [className]="className"\n                                *ngSwitchCase="\'month\'"\n                                [weekNames]="weekNames"\n                                [yearName]="yearName"\n                                [monthName]="monthName"\n                                [events]="events"\n                                [weeklyEvents]="weeklyEvents"\n                                [nstr]="nstr"\n                                (open)="openEvent($event)"\n                                (swipeleft)="next()"\n                                (swiperight)="prev()"></ngx-hm-calendar-month-view>\n\n    <ngx-hm-calendar-week-view [className]="className"\n                               *ngSwitchCase="\'week\'"\n                               [events]="events"\n                               [weeklyEvents]="weeklyEvents"\n                               [nstr]="nstr"\n                               (open)="openEvent($event)"\n                               (swipeleft)="next()"\n                               (swiperight)="prev()"></ngx-hm-calendar-week-view>\n\n    <ngx-hm-calendar-day-view [className]="className"\n                              *ngSwitchCase="\'day\'"\n                              [events]="events"\n                              [weeklyEvents]="weeklyEvents"\n                              [nstr]="nstr"\n                              start="9:00"\n                              end="23:00"\n                              (open)="openEvent($event)"\n                              (swipeleft)="next()"\n                              (swiperight)="prev()"></ngx-hm-calendar-day-view>\n\n  </div>\n\n  <ul class="type-buttom"\n      [@animate]="legendOpen">\n    <li>\n      <button class="button day"\n              type="button"\n              [disabled]="viewMode === \'day\'"\n              (click)="chaneMode(\'day\')">日</button>\n    </li>\n\n    <li>\n      <button class="button week"\n              type="button"\n              [disabled]="viewMode === \'week\'"\n              (click)="chaneMode(\'week\')">周</button>\n    </li>\n\n    <li>\n      <div style="display: flex;">\n        <span class="open-menu"\n              (click)="legendToggle()"></span>\n        <button class="button month"\n                type="button"\n                [disabled]="viewMode === \'month\'"\n                (click)="chaneMode(\'month\')">月</button>\n      </div>\n    </li>\n  </ul>\n\n  <div class="legend">\n    <span class="entry"\n          *ngFor="let category of eventCategorys">\n      {{ category.name }}\n      <span class="icon"\n            [style.background]="category.color"></span>\n    </span>\n  </div>\n</div>\n',animations:[r.trigger("animate",[r.state("flyOut",r.style({transform:"translateX(calc(100% - 55px))"})),r.state("flyIn",r.style({transform:"translateX(0)"})),r.transition("flyOut => flyIn",[r.style({transform:"translateX(calc(100% - 55px))"}),r.animate(M)]),r.transition("flyIn => flyOut",[r.style({transform:"translateX(0)"}),r.animate(M)])])],styles:[".content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;overflow:hidden}.content .header{height:50px;display:flex;justify-content:space-between;align-items:center}.content .header .title{padding:0;margin:0;font-size:20px;line-height:50px;cursor:pointer}.content .header .header-button{padding:1em}.content .header .header-button .button{border-style:solid;cursor:pointer;transition:all .5s linear}.content .header .header-button .button.left{border-width:7.5px 10px 7.5px 0}.content .header .header-button .button.right{border-width:7.5px 0 7.5px 10px}.content .type-buttom{z-index:2;position:absolute;right:0;list-style:none;bottom:0;margin:0 0 30px;text-align:right;padding:0}.content .type-buttom .open-menu{cursor:pointer;width:50px;background:#7ef3cb;border-radius:30px 0 0 30px}.content .type-buttom .button{cursor:pointer;border:0;padding:.5em 1.5em;color:#000;line-height:40px;width:100px;transition:all .2s linear}.content .type-buttom .button.month{background:#7ef3cb}.content .type-buttom .button.week{width:80px;background:#ffd353}.content .type-buttom .button.day{width:60px;background:#de5757}.content .type-buttom .button:hover{z-index:1;-webkit-transform:scale(1.1);transform:scale(1.1);color:#fff}.content .type-buttom .button:hover.month{background:#42b991}.content .type-buttom .button:hover.week{width:80px;background:#a98623}.content .type-buttom .button:hover.day{background:#af1d1d}.content .legend{width:100%;height:30px;line-height:30px}.content.black{background:#4a4a4a}.content.black .header{background:#333}.content.black .title{color:#fff}.content.black .left{border-color:transparent #a09fa0 transparent transparent}.content.black .left:hover{border-color:transparent #fff transparent transparent}.content.black .right{border-color:transparent transparent transparent #a09fa0}.content.black .right:hover{border-color:transparent transparent transparent #fff}.content.black .legend{background:#333;color:#fff}.content.white{background:#fff}.content.white .header{background:#c7c7c7}.content.white .title{color:#000}.content.white .left{border-color:transparent #000 transparent transparent}.content.white .left:hover{border-color:transparent #fff transparent transparent}.content.white .right{border-color:transparent transparent transparent #000}.content.white .right:hover{border-color:transparent transparent transparent #fff}.content.white .legend{background:#c7c7c7;color:#000}.content .view-block{height:calc(100% - 80px);overflow-y:auto}.entry{position:relative;padding:0 0 0 25px;font-size:13px;display:inline-block;line-height:30px;background:0 0}.entry .icon{position:absolute;height:5px;width:5px;top:12px;left:14px}.mask{position:absolute;overflow:hidden;width:110%;height:100%;right:0}.mask:after{content:'';position:absolute;top:-40%;right:110%;width:30px;height:200%;background:rgba(255,255,255,.3);-webkit-transform:rotate(20deg);transform:rotate(20deg)}"]}]}],e.ctorParameters=function(){return[{type:t.NgxRxModalService},{type:n.ComponentFactoryResolver}]},e.propDecorators={weekNames:[{type:n.Input}],yearName:[{type:n.Input}],monthName:[{type:n.Input}],dayName:[{type:n.Input}],eventCategorys:[{type:n.Input}],weeklyEvents:[{type:n.Input}],events:[{type:n.Input}],nstr:[{type:n.Input}],open:[{type:n.Output}],className:[{type:n.Input}],size:[{type:n.Input}],monthComponent:[{type:n.ViewChild,args:[u]}],weekComponent:[{type:n.ViewChild,args:[y]}],dayComponent:[{type:n.ViewChild,args:[b]}]},e}(),N=[b],C=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule],declarations:[N],exports:[N],schemas:[n.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overrides={swipe:{direction:s.DIRECTION_ALL}},e}return function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,t),e}(i.HammerGestureConfig),O=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule],declarations:[u,D],exports:[u],entryComponents:[D],providers:[{provide:i.HAMMER_GESTURE_CONFIG,useClass:I}]}]}],e}(),Y=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule],declarations:[y],exports:[y]}]}],e}(),F=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule,t.NgxRxModalModule,O,Y,C],declarations:[E],exports:[E]}]}],e}();e.NgxHmCalendarComponent=E,e.NgxHmCalendarModule=F,e.NgxHmCalendarViewMode=l,e.ɵc=b,e.ɵh=C,e.ɵf=D,e.ɵa=u,e.ɵd=I,e.ɵe=O,e.ɵb=y,e.ɵg=Y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-hm-calendar.umd.min.js.map